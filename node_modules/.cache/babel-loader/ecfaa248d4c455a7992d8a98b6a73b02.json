{"ast":null,"code":"import { useCallback } from 'react';\nimport inflection from 'inflection';\nimport useVersion from '../useVersion';\nimport { useCheckMinimumRequiredProps } from '../checkMinimumRequiredProps';\nimport { useNotify, useRedirect, useRefresh } from '../../sideEffect';\nimport { useGetOne, useUpdate } from '../../dataProvider';\nimport { useTranslate } from '../../i18n';\nimport { CRUD_GET_ONE, CRUD_UPDATE } from '../../actions';\nimport { useSaveModifiers } from '../saveModifiers';\nimport { useResourceContext } from '../../core';\n/**\n * Prepare data for the Edit view\n *\n * @param {Object} props The props passed to the Edit component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Edit view\n *\n * @example\n *\n * import { useEditController } from 'react-admin';\n * import EditView from './EditView';\n *\n * const MyEdit = props => {\n *     const controllerProps = useEditController(props);\n *     return <EditView {...controllerProps} {...props} />;\n * }\n */\n\nexport var useEditController = function (props) {\n  useCheckMinimumRequiredProps('Edit', ['basePath', 'resource'], props);\n  var basePath = props.basePath,\n      hasCreate = props.hasCreate,\n      hasEdit = props.hasEdit,\n      hasList = props.hasList,\n      hasShow = props.hasShow,\n      id = props.id,\n      successMessage = props.successMessage,\n      _a = props.undoable,\n      undoable = _a === void 0 ? true : _a,\n      onSuccess = props.onSuccess,\n      onFailure = props.onFailure,\n      transform = props.transform;\n  var resource = useResourceContext(props);\n  var translate = useTranslate();\n  var notify = useNotify();\n  var redirect = useRedirect();\n  var refresh = useRefresh();\n  var version = useVersion();\n\n  if (process.env.NODE_ENV !== 'production' && successMessage) {\n    console.log('<Edit successMessage> prop is deprecated, use the onSuccess prop instead.');\n  }\n\n  var _b = useSaveModifiers({\n    onSuccess: onSuccess,\n    onFailure: onFailure,\n    transform: transform\n  }),\n      onSuccessRef = _b.onSuccessRef,\n      setOnSuccess = _b.setOnSuccess,\n      onFailureRef = _b.onFailureRef,\n      setOnFailure = _b.setOnFailure,\n      transformRef = _b.transformRef,\n      setTransform = _b.setTransform;\n\n  var _c = useGetOne(resource, id, {\n    action: CRUD_GET_ONE,\n    onFailure: function () {\n      notify('ra.notification.item_doesnt_exist', 'warning');\n      redirect('list', basePath);\n      refresh();\n    }\n  }),\n      record = _c.data,\n      loading = _c.loading,\n      loaded = _c.loaded;\n\n  var resourceName = translate(\"resources.\" + resource + \".name\", {\n    smart_count: 1,\n    _: inflection.humanize(inflection.singularize(resource))\n  });\n  var defaultTitle = translate('ra.page.edit', {\n    name: \"\" + resourceName,\n    id: id,\n    record: record\n  });\n\n  var _d = useUpdate(resource, id, {}, // set by the caller\n  record),\n      update = _d[0],\n      saving = _d[1].loading;\n\n  var save = useCallback(function (data, redirectTo, _a) {\n    if (redirectTo === void 0) {\n      redirectTo = DefaultRedirect;\n    }\n\n    var _b = _a === void 0 ? {} : _a,\n        onSuccessFromSave = _b.onSuccess,\n        onFailureFromSave = _b.onFailure,\n        transformFromSave = _b.transform;\n\n    return Promise.resolve(transformFromSave ? transformFromSave(data) : transformRef.current ? transformRef.current(data) : data).then(function (data) {\n      return update({\n        payload: {\n          data: data\n        }\n      }, {\n        action: CRUD_UPDATE,\n        onSuccess: onSuccessFromSave ? onSuccessFromSave : onSuccessRef.current ? onSuccessRef.current : function () {\n          notify(successMessage || 'ra.notification.updated', 'info', {\n            smart_count: 1\n          }, undoable);\n          redirect(redirectTo, basePath, data.id, data);\n        },\n        onFailure: onFailureFromSave ? onFailureFromSave : onFailureRef.current ? onFailureRef.current : function (error) {\n          notify(typeof error === 'string' ? error : error.message || 'ra.notification.http_error', 'warning', {\n            _: typeof error === 'string' ? error : error && error.message ? error.message : undefined\n          });\n\n          if (undoable) {\n            refresh();\n          }\n        },\n        undoable: undoable\n      });\n    });\n  }, [transformRef, update, onSuccessRef, onFailureRef, undoable, notify, successMessage, redirect, basePath, refresh]);\n  return {\n    loading: loading,\n    loaded: loaded,\n    saving: saving,\n    defaultTitle: defaultTitle,\n    hasCreate: hasCreate,\n    hasEdit: hasEdit,\n    hasList: hasList,\n    hasShow: hasShow,\n    onSuccessRef: onSuccessRef,\n    onFailureRef: onFailureRef,\n    transformRef: transformRef,\n    save: save,\n    setOnSuccess: setOnSuccess,\n    setOnFailure: setOnFailure,\n    setTransform: setTransform,\n    resource: resource,\n    basePath: basePath,\n    record: record,\n    redirect: DefaultRedirect,\n    version: version\n  };\n};\nvar DefaultRedirect = 'list';","map":{"version":3,"sources":["F:/TTNM/admin3/node_modules/ra-core/esm/controller/details/useEditController.js"],"names":["useCallback","inflection","useVersion","useCheckMinimumRequiredProps","useNotify","useRedirect","useRefresh","useGetOne","useUpdate","useTranslate","CRUD_GET_ONE","CRUD_UPDATE","useSaveModifiers","useResourceContext","useEditController","props","basePath","hasCreate","hasEdit","hasList","hasShow","id","successMessage","_a","undoable","onSuccess","onFailure","transform","resource","translate","notify","redirect","refresh","version","process","env","NODE_ENV","console","log","_b","onSuccessRef","setOnSuccess","onFailureRef","setOnFailure","transformRef","setTransform","_c","action","record","data","loading","loaded","resourceName","smart_count","_","humanize","singularize","defaultTitle","name","_d","update","saving","save","redirectTo","DefaultRedirect","onSuccessFromSave","onFailureFromSave","transformFromSave","Promise","resolve","current","then","payload","error","message","undefined"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,SAASC,4BAAT,QAA6C,8BAA7C;AACA,SAASC,SAAT,EAAoBC,WAApB,EAAiCC,UAAjC,QAAoD,kBAApD;AACA,SAASC,SAAT,EAAoBC,SAApB,QAAqC,oBAArC;AACA,SAASC,YAAT,QAA6B,YAA7B;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,eAA1C;AACA,SAASC,gBAAT,QAAkC,kBAAlC;AACA,SAASC,kBAAT,QAAmC,YAAnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,IAAIC,iBAAiB,GAAG,UAAUC,KAAV,EAAiB;AAC5CZ,EAAAA,4BAA4B,CAAC,MAAD,EAAS,CAAC,UAAD,EAAa,UAAb,CAAT,EAAmCY,KAAnC,CAA5B;AACA,MAAIC,QAAQ,GAAGD,KAAK,CAACC,QAArB;AAAA,MAA+BC,SAAS,GAAGF,KAAK,CAACE,SAAjD;AAAA,MAA4DC,OAAO,GAAGH,KAAK,CAACG,OAA5E;AAAA,MAAqFC,OAAO,GAAGJ,KAAK,CAACI,OAArG;AAAA,MAA8GC,OAAO,GAAGL,KAAK,CAACK,OAA9H;AAAA,MAAuIC,EAAE,GAAGN,KAAK,CAACM,EAAlJ;AAAA,MAAsJC,cAAc,GAAGP,KAAK,CAACO,cAA7K;AAAA,MAA6LC,EAAE,GAAGR,KAAK,CAACS,QAAxM;AAAA,MAAkNA,QAAQ,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAApP;AAAA,MAAwPE,SAAS,GAAGV,KAAK,CAACU,SAA1Q;AAAA,MAAqRC,SAAS,GAAGX,KAAK,CAACW,SAAvS;AAAA,MAAkTC,SAAS,GAAGZ,KAAK,CAACY,SAApU;AACA,MAAIC,QAAQ,GAAGf,kBAAkB,CAACE,KAAD,CAAjC;AACA,MAAIc,SAAS,GAAGpB,YAAY,EAA5B;AACA,MAAIqB,MAAM,GAAG1B,SAAS,EAAtB;AACA,MAAI2B,QAAQ,GAAG1B,WAAW,EAA1B;AACA,MAAI2B,OAAO,GAAG1B,UAAU,EAAxB;AACA,MAAI2B,OAAO,GAAG/B,UAAU,EAAxB;;AACA,MAAIgC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,IAAyCd,cAA7C,EAA6D;AACzDe,IAAAA,OAAO,CAACC,GAAR,CAAY,2EAAZ;AACH;;AACD,MAAIC,EAAE,GAAG3B,gBAAgB,CAAC;AAAEa,IAAAA,SAAS,EAAEA,SAAb;AAAwBC,IAAAA,SAAS,EAAEA,SAAnC;AAA8CC,IAAAA,SAAS,EAAEA;AAAzD,GAAD,CAAzB;AAAA,MAAiGa,YAAY,GAAGD,EAAE,CAACC,YAAnH;AAAA,MAAiIC,YAAY,GAAGF,EAAE,CAACE,YAAnJ;AAAA,MAAiKC,YAAY,GAAGH,EAAE,CAACG,YAAnL;AAAA,MAAiMC,YAAY,GAAGJ,EAAE,CAACI,YAAnN;AAAA,MAAiOC,YAAY,GAAGL,EAAE,CAACK,YAAnP;AAAA,MAAiQC,YAAY,GAAGN,EAAE,CAACM,YAAnR;;AACA,MAAIC,EAAE,GAAGvC,SAAS,CAACqB,QAAD,EAAWP,EAAX,EAAe;AAC7B0B,IAAAA,MAAM,EAAErC,YADqB;AAE7BgB,IAAAA,SAAS,EAAE,YAAY;AACnBI,MAAAA,MAAM,CAAC,mCAAD,EAAsC,SAAtC,CAAN;AACAC,MAAAA,QAAQ,CAAC,MAAD,EAASf,QAAT,CAAR;AACAgB,MAAAA,OAAO;AACV;AAN4B,GAAf,CAAlB;AAAA,MAOIgB,MAAM,GAAGF,EAAE,CAACG,IAPhB;AAAA,MAOsBC,OAAO,GAAGJ,EAAE,CAACI,OAPnC;AAAA,MAO4CC,MAAM,GAAGL,EAAE,CAACK,MAPxD;;AAQA,MAAIC,YAAY,GAAGvB,SAAS,CAAC,eAAeD,QAAf,GAA0B,OAA3B,EAAoC;AAC5DyB,IAAAA,WAAW,EAAE,CAD+C;AAE5DC,IAAAA,CAAC,EAAErD,UAAU,CAACsD,QAAX,CAAoBtD,UAAU,CAACuD,WAAX,CAAuB5B,QAAvB,CAApB;AAFyD,GAApC,CAA5B;AAIA,MAAI6B,YAAY,GAAG5B,SAAS,CAAC,cAAD,EAAiB;AACzC6B,IAAAA,IAAI,EAAE,KAAKN,YAD8B;AAEzC/B,IAAAA,EAAE,EAAEA,EAFqC;AAGzC2B,IAAAA,MAAM,EAAEA;AAHiC,GAAjB,CAA5B;;AAKA,MAAIW,EAAE,GAAGnD,SAAS,CAACoB,QAAD,EAAWP,EAAX,EAAe,EAAf,EAAmB;AACrC2B,EAAAA,MADkB,CAAlB;AAAA,MACSY,MAAM,GAAGD,EAAE,CAAC,CAAD,CADpB;AAAA,MACyBE,MAAM,GAAGF,EAAE,CAAC,CAAD,CAAF,CAAMT,OADxC;;AAEA,MAAIY,IAAI,GAAG9D,WAAW,CAAC,UAAUiD,IAAV,EAAgBc,UAAhB,EAA4BxC,EAA5B,EAAgC;AACnD,QAAIwC,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,MAAAA,UAAU,GAAGC,eAAb;AAA+B;;AAC5D,QAAIzB,EAAE,GAAGhB,EAAE,KAAK,KAAK,CAAZ,GAAgB,EAAhB,GAAqBA,EAA9B;AAAA,QAAkC0C,iBAAiB,GAAG1B,EAAE,CAACd,SAAzD;AAAA,QAAoEyC,iBAAiB,GAAG3B,EAAE,CAACb,SAA3F;AAAA,QAAsGyC,iBAAiB,GAAG5B,EAAE,CAACZ,SAA7H;;AACA,WAAOyC,OAAO,CAACC,OAAR,CAAgBF,iBAAiB,GAClCA,iBAAiB,CAAClB,IAAD,CADiB,GAElCL,YAAY,CAAC0B,OAAb,GACI1B,YAAY,CAAC0B,OAAb,CAAqBrB,IAArB,CADJ,GAEIA,IAJH,EAISsB,IAJT,CAIc,UAAUtB,IAAV,EAAgB;AACjC,aAAOW,MAAM,CAAC;AAAEY,QAAAA,OAAO,EAAE;AAAEvB,UAAAA,IAAI,EAAEA;AAAR;AAAX,OAAD,EAA8B;AACvCF,QAAAA,MAAM,EAAEpC,WAD+B;AAEvCc,QAAAA,SAAS,EAAEwC,iBAAiB,GACtBA,iBADsB,GAEtBzB,YAAY,CAAC8B,OAAb,GACI9B,YAAY,CAAC8B,OADjB,GAEI,YAAY;AACVxC,UAAAA,MAAM,CAACR,cAAc,IACjB,yBADE,EACyB,MADzB,EACiC;AACnC+B,YAAAA,WAAW,EAAE;AADsB,WADjC,EAGH7B,QAHG,CAAN;AAIAO,UAAAA,QAAQ,CAACgC,UAAD,EAAa/C,QAAb,EAAuBiC,IAAI,CAAC5B,EAA5B,EAAgC4B,IAAhC,CAAR;AACH,SAZ8B;AAavCvB,QAAAA,SAAS,EAAEwC,iBAAiB,GACtBA,iBADsB,GAEtBxB,YAAY,CAAC4B,OAAb,GACI5B,YAAY,CAAC4B,OADjB,GAEI,UAAUG,KAAV,EAAiB;AACf3C,UAAAA,MAAM,CAAC,OAAO2C,KAAP,KAAiB,QAAjB,GACDA,KADC,GAEDA,KAAK,CAACC,OAAN,IACE,4BAHF,EAGgC,SAHhC,EAG2C;AAC7CpB,YAAAA,CAAC,EAAE,OAAOmB,KAAP,KAAiB,QAAjB,GACGA,KADH,GAEGA,KAAK,IAAIA,KAAK,CAACC,OAAf,GACID,KAAK,CAACC,OADV,GAEIC;AALmC,WAH3C,CAAN;;AAUA,cAAInD,QAAJ,EAAc;AACVQ,YAAAA,OAAO;AACV;AACJ,SA/B8B;AAgCvCR,QAAAA,QAAQ,EAAEA;AAhC6B,OAA9B,CAAb;AAkCH,KAvCM,CAAP;AAwCH,GA3CqB,EA2CnB,CACCoB,YADD,EAECgB,MAFD,EAGCpB,YAHD,EAICE,YAJD,EAKClB,QALD,EAMCM,MAND,EAOCR,cAPD,EAQCS,QARD,EASCf,QATD,EAUCgB,OAVD,CA3CmB,CAAtB;AAuDA,SAAO;AACHkB,IAAAA,OAAO,EAAEA,OADN;AAEHC,IAAAA,MAAM,EAAEA,MAFL;AAGHU,IAAAA,MAAM,EAAEA,MAHL;AAIHJ,IAAAA,YAAY,EAAEA,YAJX;AAKHxC,IAAAA,SAAS,EAAEA,SALR;AAMHC,IAAAA,OAAO,EAAEA,OANN;AAOHC,IAAAA,OAAO,EAAEA,OAPN;AAQHC,IAAAA,OAAO,EAAEA,OARN;AASHoB,IAAAA,YAAY,EAAEA,YATX;AAUHE,IAAAA,YAAY,EAAEA,YAVX;AAWHE,IAAAA,YAAY,EAAEA,YAXX;AAYHkB,IAAAA,IAAI,EAAEA,IAZH;AAaHrB,IAAAA,YAAY,EAAEA,YAbX;AAcHE,IAAAA,YAAY,EAAEA,YAdX;AAeHE,IAAAA,YAAY,EAAEA,YAfX;AAgBHjB,IAAAA,QAAQ,EAAEA,QAhBP;AAiBHZ,IAAAA,QAAQ,EAAEA,QAjBP;AAkBHgC,IAAAA,MAAM,EAAEA,MAlBL;AAmBHjB,IAAAA,QAAQ,EAAEiC,eAnBP;AAoBH/B,IAAAA,OAAO,EAAEA;AApBN,GAAP;AAsBH,CA7GM;AA8GP,IAAI+B,eAAe,GAAG,MAAtB","sourcesContent":["import { useCallback } from 'react';\nimport inflection from 'inflection';\nimport useVersion from '../useVersion';\nimport { useCheckMinimumRequiredProps } from '../checkMinimumRequiredProps';\nimport { useNotify, useRedirect, useRefresh, } from '../../sideEffect';\nimport { useGetOne, useUpdate } from '../../dataProvider';\nimport { useTranslate } from '../../i18n';\nimport { CRUD_GET_ONE, CRUD_UPDATE } from '../../actions';\nimport { useSaveModifiers, } from '../saveModifiers';\nimport { useResourceContext } from '../../core';\n/**\n * Prepare data for the Edit view\n *\n * @param {Object} props The props passed to the Edit component.\n *\n * @return {Object} controllerProps Fetched data and callbacks for the Edit view\n *\n * @example\n *\n * import { useEditController } from 'react-admin';\n * import EditView from './EditView';\n *\n * const MyEdit = props => {\n *     const controllerProps = useEditController(props);\n *     return <EditView {...controllerProps} {...props} />;\n * }\n */\nexport var useEditController = function (props) {\n    useCheckMinimumRequiredProps('Edit', ['basePath', 'resource'], props);\n    var basePath = props.basePath, hasCreate = props.hasCreate, hasEdit = props.hasEdit, hasList = props.hasList, hasShow = props.hasShow, id = props.id, successMessage = props.successMessage, _a = props.undoable, undoable = _a === void 0 ? true : _a, onSuccess = props.onSuccess, onFailure = props.onFailure, transform = props.transform;\n    var resource = useResourceContext(props);\n    var translate = useTranslate();\n    var notify = useNotify();\n    var redirect = useRedirect();\n    var refresh = useRefresh();\n    var version = useVersion();\n    if (process.env.NODE_ENV !== 'production' && successMessage) {\n        console.log('<Edit successMessage> prop is deprecated, use the onSuccess prop instead.');\n    }\n    var _b = useSaveModifiers({ onSuccess: onSuccess, onFailure: onFailure, transform: transform }), onSuccessRef = _b.onSuccessRef, setOnSuccess = _b.setOnSuccess, onFailureRef = _b.onFailureRef, setOnFailure = _b.setOnFailure, transformRef = _b.transformRef, setTransform = _b.setTransform;\n    var _c = useGetOne(resource, id, {\n        action: CRUD_GET_ONE,\n        onFailure: function () {\n            notify('ra.notification.item_doesnt_exist', 'warning');\n            redirect('list', basePath);\n            refresh();\n        },\n    }), record = _c.data, loading = _c.loading, loaded = _c.loaded;\n    var resourceName = translate(\"resources.\" + resource + \".name\", {\n        smart_count: 1,\n        _: inflection.humanize(inflection.singularize(resource)),\n    });\n    var defaultTitle = translate('ra.page.edit', {\n        name: \"\" + resourceName,\n        id: id,\n        record: record,\n    });\n    var _d = useUpdate(resource, id, {}, // set by the caller\n    record), update = _d[0], saving = _d[1].loading;\n    var save = useCallback(function (data, redirectTo, _a) {\n        if (redirectTo === void 0) { redirectTo = DefaultRedirect; }\n        var _b = _a === void 0 ? {} : _a, onSuccessFromSave = _b.onSuccess, onFailureFromSave = _b.onFailure, transformFromSave = _b.transform;\n        return Promise.resolve(transformFromSave\n            ? transformFromSave(data)\n            : transformRef.current\n                ? transformRef.current(data)\n                : data).then(function (data) {\n            return update({ payload: { data: data } }, {\n                action: CRUD_UPDATE,\n                onSuccess: onSuccessFromSave\n                    ? onSuccessFromSave\n                    : onSuccessRef.current\n                        ? onSuccessRef.current\n                        : function () {\n                            notify(successMessage ||\n                                'ra.notification.updated', 'info', {\n                                smart_count: 1,\n                            }, undoable);\n                            redirect(redirectTo, basePath, data.id, data);\n                        },\n                onFailure: onFailureFromSave\n                    ? onFailureFromSave\n                    : onFailureRef.current\n                        ? onFailureRef.current\n                        : function (error) {\n                            notify(typeof error === 'string'\n                                ? error\n                                : error.message ||\n                                    'ra.notification.http_error', 'warning', {\n                                _: typeof error === 'string'\n                                    ? error\n                                    : error && error.message\n                                        ? error.message\n                                        : undefined,\n                            });\n                            if (undoable) {\n                                refresh();\n                            }\n                        },\n                undoable: undoable,\n            });\n        });\n    }, [\n        transformRef,\n        update,\n        onSuccessRef,\n        onFailureRef,\n        undoable,\n        notify,\n        successMessage,\n        redirect,\n        basePath,\n        refresh,\n    ]);\n    return {\n        loading: loading,\n        loaded: loaded,\n        saving: saving,\n        defaultTitle: defaultTitle,\n        hasCreate: hasCreate,\n        hasEdit: hasEdit,\n        hasList: hasList,\n        hasShow: hasShow,\n        onSuccessRef: onSuccessRef,\n        onFailureRef: onFailureRef,\n        transformRef: transformRef,\n        save: save,\n        setOnSuccess: setOnSuccess,\n        setOnFailure: setOnFailure,\n        setTransform: setTransform,\n        resource: resource,\n        basePath: basePath,\n        record: record,\n        redirect: DefaultRedirect,\n        version: version,\n    };\n};\nvar DefaultRedirect = 'list';\n"]},"metadata":{},"sourceType":"module"}